DROP DATABASE CLINICA;

CREATE DATABASE CLINICA;

USE CLINICA;

CREATE TABLE NACIONALIDADES (
	CODIGO INT PRIMARY KEY AUTO_INCREMENT,
	DESCRIPCION VARCHAR(20) NOT NULL
);

CREATE TABLE PROVINCIAS (
	CODIGO INT PRIMARY KEY AUTO_INCREMENT,
	DESCRIPCION VARCHAR(20) NOT NULL
);

CREATE TABLE PACIENTES(
	CODIGO INT PRIMARY KEY AUTO_INCREMENT,
	DNI INT UNIQUE NOT NULL,
	NOMBRE VARCHAR (20) NOT NULL,
	APELLIDO VARCHAR(30) NOT NULL,
	SEXO VARCHAR(1) NOT NULL,
	COD_NACIONALIDAD INT NOT NULL,
    CONSTRAINT pk_nacionalidad FOREIGN KEY (COD_NACIONALIDAD) REFERENCES NACIONALIDADES(CODIGO),
	FECHA_NAC DATE NOT NULL,
	DIRECCION VARCHAR(40) NOT NULL,
	LOCALIDAD VARCHAR(20) NOT NULL,
	PROVINCIA INT NOT NULL,
    CONSTRAINT pk_provincia FOREIGN KEY (PROVINCIA) REFERENCES PROVINCIAS(CODIGO),
	EMAIL VARCHAR(40),
	TELEFONO VARCHAR(15) NOT NULL,
	ESTADO BIT NOT NULL
);

CREATE TABLE ESPECIALIDADES (
	CODIGO INT PRIMARY KEY AUTO_INCREMENT,
	DESCRIPCION VARCHAR(20) NOT NULL
);

CREATE TABLE TIPOS_USUARIO (
	CODIGO INT PRIMARY KEY AUTO_INCREMENT,
	DESCRIPCION VARCHAR(20) NOT NULL
);

CREATE TABLE EMPLEADOS(
	DNI INT PRIMARY KEY,
	NOMBRE VARCHAR (20) NOT NULL,
	APELLIDO VARCHAR(30) NOT NULL,
	SEXO VARCHAR(1) NOT NULL,
	COD_NACIONALIDAD INT NOT NULL,
    CONSTRAINT pk_nac_empleados FOREIGN KEY (COD_NACIONALIDAD) REFERENCES NACIONALIDADES(CODIGO),
	FECHA_NAC DATE NOT NULL,
	DIRECCION VARCHAR(40) NOT NULL,
	LOCALIDAD VARCHAR(20) NOT NULL,
	PROVINCIA INT NOT NULL,
    CONSTRAINT pk_prov_empleados FOREIGN KEY (PROVINCIA) REFERENCES PROVINCIAS(CODIGO),
	EMAIL VARCHAR(40) NOT NULL,
	TELEFONO VARCHAR(15) NOT NULL,
	ESTADO BIT
);

CREATE TABLE DIASEMANA(
	CODIGO INT PRIMARY KEY,
	DESCRIPCION VARCHAR(10) UNIQUE NOT NULL
);

CREATE TABLE MEDICO_POR_ESPECIALIDAD(
	DNIMEDICO INT,
    CONSTRAINT pk_dnimedico FOREIGN KEY (DNIMEDICO) REFERENCES EMPLEADOS(DNI),
	COD_ESPECIALIDAD INT NOT NULL,
    CONSTRAINT pk_especialidad FOREIGN KEY (COD_ESPECIALIDAD) REFERENCES ESPECIALIDADES(CODIGO),
	DIASEMANA INT NOT NULL,
    CONSTRAINT pk_diasemana FOREIGN KEY (DIASEMANA) REFERENCES DIASEMANA(CODIGO),
	HORAINICIO TIME NOT NULL, 
	HORAFIN TIME NOT NULL,
	ESTADO BIT NOT NULL,

	PRIMARY KEY (DNIMEDICO, DIASEMANA, COD_ESPECIALIDAD)
);

CREATE TABLE ESTADOS_TURNOS (
	CODIGO INT PRIMARY KEY AUTO_INCREMENT,
	DESCRIPCION VARCHAR(20) NOT NULL
);

CREATE TABLE TURNOS(
	DNIMEDICO INT,
    CONSTRAINT pk_dni_med FOREIGN KEY (DNIMEDICO) REFERENCES EMPLEADOS(DNI),
	DIA DATE NOT NULL,
	HORARIO TIME NOT NULL, 
	COD_PACIENTE INT,
	COMENTARIO VARCHAR(500) NULL,
    CONSTRAINT pk_cod_pac FOREIGN KEY (COD_PACIENTE) REFERENCES PACIENTES(CODIGO),
	COD_ESPECIALIDAD INT NOT NULL,
    CONSTRAINT pk_espec_turno FOREIGN KEY (COD_ESPECIALIDAD) REFERENCES ESPECIALIDADES(CODIGO),
	COD_ESTADO_TURNO INT NOT NULL,
    CONSTRAINT pk_est_turno FOREIGN KEY (COD_ESTADO_TURNO) REFERENCES ESTADOS_TURNOS(CODIGO),
	ESTADO BIT NOT NULL,
	PRIMARY KEY (DNIMEDICO, DIA, HORARIO)
);

CREATE TABLE USUARIOS (
	CODIGO INT PRIMARY KEY AUTO_INCREMENT,
	DNI INT UNIQUE NOT NULL,
    CONSTRAINT pk_dni_usuario FOREIGN KEY (DNI) REFERENCES EMPLEADOS(DNI), 
	CONTRASENIA VARCHAR(20) NOT NULL,
	COD_TIPOSUSUARIO INT NOT NULL,
    CONSTRAINT pk_tipoUsuario FOREIGN KEY (COD_TIPOSUSUARIO) REFERENCES TIPOS_USUARIO(CODIGO),
	ESTADO BIT NOT NULL
);

-- INSERCIÓN DE DATOS EN LA BASE DE DATOS

-- TABLA DIASSEMANA
INSERT INTO DIASEMANA (CODIGO, DESCRIPCION) VALUES (1, 'LUNES'), (2, 'MARTES'),(3, 'MIERCOLES'), (4, 'JUEVES'), (5, 'VIERNES'), (6, 'SABADO');

-- TABLA ESPECIALIDADES
INSERT INTO ESPECIALIDADES (DESCRIPCION) VALUES ('PEDIATRIA'), ('OTORRINOLARINGOLOGIA'), ('ALERGIA'),  ('CLINICA'), ('NEUMONOLOGIA'),  ('DERMATOLOGIA'), ('NUTRICION'), ('ENDOCRINOLOGÍA'), ('TRAUMATOLOGÍA');

-- TABLA ESTADOS_TURNOS
INSERT INTO ESTADOS_TURNOS(DESCRIPCION) VALUES('LIBRE'),('OCUPADO'),('AUSENTE'),('PRESENTE'), ('ANULADO');

-- TABLA NACIONALIDADES
INSERT INTO NACIONALIDADES(DESCRIPCION) VALUES('ARGENTINA'),('CHILE'),('URUGUAY'),('BOLIVIA'),('PARAGUAY');

-- TABLA PROVINCIAS
INSERT INTO PROVINCIAS(DESCRIPCION) VALUES('BUENOS AIRES'),('CABA'),('ENTRE RIOS'),('SANTA FE'),('LA PAMPA'),('MENDOZA'),('RIO NEGRO'),('CHUBUT'),('SANTA CRUZ'),('NEUQUEN'),('LA RIOJA'),
('CATAMARCA'),('FORMOSA'),('JUJUY'),('CHACO'),('SALTA'),('MISIONES'),('TIERRA DEL FUEGO'),('CORDOBA'),('CORRIENTES'),('SAN JUAN'),('SAN LUIS'),('SANTIAGO DEL ESTERO'),('TUCUMAN');

-- TABLA TIPOS USUARIO
INSERT INTO TIPOS_USUARIO(DESCRIPCION) VALUES('ADMINISTRADOR'),('MEDICO');

-- TABLA EMPLEADOS
INSERT INTO EMPLEADOS(DNI, NOMBRE, APELLIDO, SEXO, COD_NACIONALIDAD, FECHA_NAC, DIRECCION, LOCALIDAD, PROVINCIA, EMAIL, TELEFONO, ESTADO)
VALUES
(11111111, 'JUAN', 'PEREZ', 'M', 1, '1977/03/25', 'LOS PATOS 5855', 'CABA', 1,'juanperez@clinica.com', '1111111111',1),
(22222222, 'MARIO', 'CARRANZA', 'M', 1, '1971/07/05', 'ACASSUSO 8788', 'BUENOS AIRES', 2,'mariocarranza@clinica.com', '2222222222',1), 
(33333333, 'EZEQUIEL', 'MORENO', 'M', 2, '1963/11/15', 'AV MAIPU 5255', 'OLIVOS', 2,'ezequielmoreno@clinica.com', '3333333333',1),
(44444444, 'MARIA', 'ROMERO', 'F', 1, '1966/08/25', 'AV. RIVADAVIA 15525', 'RAMOS MEJIA', 2,'mariaromero@clinica.com', '4444444444',1),
(55555555, 'JUANA', 'MARTINEZ', 'F', 4, '1987/07/16', 'AV. CALLAO 560', 'CABA', 1,'juanamartinez@clinica.com', '5555555555',1),
(66666666, 'MARIANA', 'TRIDENTE', 'F', 1, '1978/11/23', 'AV. INDEPENDENCIA 845', 'CABA', 1,'marianatridente@clinica.com', '6666666666',1),
(77777777, 'RAMIRO', 'RAMIREZ', 'M', 3, '1980/04/15', 'AV. MITRE 5478', 'MUNRO', 2,'ramiroramirez@clinica.com', '7777777777',1),
(88888888, 'CAROLINA', 'CASTRO', 'F', 1, '1985/09/11', 'SAN LORENZO 5855', 'OLIVOS', 2,'carolinacastro@clinica.com', '8888888888',1),
(99999999, 'JORGE', 'CARRIZO', 'M', 1, '1975/02/11', 'LORENZO ÁVILA 3454', 'CABA', 1,'jorgecarrizo@clinica.com', '9999999999',1),
(54545454, 'ANALÍA', 'FRANCHÍN', 'F', 1, '1980/04/14', 'AV. SAN JUAN 3433', 'CABA', 1,'carolinacastro@clinica.com', '1154486544',1),
(13558468, 'ADRIÁN', 'SUAR', 'M', 1, '1970/06/19', 'FLEMMING 5433', 'MARTÍNEZ', 2,'adriansuar@clinica.com', '1153385545',1),
(12885745, 'MICA', 'VICICONTE', 'F', 1, '1975/12/19', 'CARIOCA 854', 'MARTÍNEZ', 2,'micaviciconte@clinica.com', '1168875955',1),
(32885741, 'LIONEL', 'MESSI', 'M', 1, '1980/08/16', 'BARCELONA 440', 'ROSARIO', 4,'liomessi@clinica.com', '1135848855',1),
(20485444, 'BENJAMÍN', 'VICUÑA', 'M', 1, '1970/08/29', 'AV. SANTA FÉ 2133', 'CABA', 1,'benjaminvicuña@clinica.com', '1168875456',1),
(26887596, 'CECILIA', 'ROTH', 'F', 1, '1950/02/11', 'MADRID 2020', 'MENDOZA', 6,'ceciliaroth@clinica.com', '1149857788',1),
(16887365, 'PAULA', 'CHÁVEZ', 'F', 1, '1980/11/10', 'AV. SCALABRINI ORTIZ 443', 'CABA', 1,'paulachavez@clinica.com', '1168879655',1),
(11578468, 'BILL', 'GATES', 'M', 1, '1950/09/13', 'MICROSOFT 425', 'CABA', 1,'billgates@clinica.com', '1169859622',1),
(12555458, 'MARCELO', 'TINELLI', 'M', 1, '1963/07/21', 'SAN LORENZO 9999', 'SAN FERNANDO', 2,'marcelotinelli@clinica.com', '1138854533',1);

-- TABLA MEDICOS POR ESPECIALIDAD
-- INSERT INTO MEDICO_POR_ESPECIALIDAD(DNIMEDICO, COD_ESPECIALIDAD, DIASEMANA, HORAINICIO, HORAFIN, ESTADO) 
INSERT INTO MEDICO_POR_ESPECIALIDAD(DNIMEDICO, DIASEMANA, HORAINICIO, HORAFIN, COD_ESPECIALIDAD, ESTADO) 
VALUES 
(11111111, 3, '14:00:00','19:00:00', 1, 1),
(22222222, 3, '14:00:00','19:00:00', 2, 1),
(33333333, 1, '09:00:00','13:00:00', 3, 1),
(44444444, 3, '10:00:00','15:00:00', 4, 1),
(55555555, 5, '14:00:00','19:00:00', 9, 1),
(66666666, 2, '10:00:00','14:00:00', 5, 1),
(99999999, 1, '11:00:00','15:00:00', 1, 1),
(54545454, 1, '09:00:00','14:00:00', 5, 1),
(13558468, 4, '13:00:00','19:00:00', 2, 1),
(12885745, 5, '13:00:00','19:00:00', 6, 1),
(32885741, 3, '11:00:00','16:00:00', 3, 1),
(20485444, 1, '10:00:00','15:00:00', 5, 1),
(26887596, 4, '10:00:00','15:00:00', 6, 1),
(16887365, 1, '10:00:00','15:00:00', 9, 1),
(12555458, 2, '09:00:00','13:00:00', 4, 1);


-- TABLA PACIENTES
INSERT INTO PACIENTES (DNI, NOMBRE, APELLIDO, SEXO, COD_NACIONALIDAD, FECHA_NAC, DIRECCION, LOCALIDAD, PROVINCIA, EMAIL, TELEFONO, ESTADO)
VALUES 
(25668455, 'JUAN', 'ORTIZ', 'M', 4, '1947/02/24', 'LOS PATOS 44', 'CABA', 1,'juanortiz@gmail.com', '1158854456', 1),
(35885224, 'NATALIA', 'LOPEZ', 'F', 4, '1977/08/14', 'FLORIDA 3222', 'VICENTE LOPEZ', 2,'natalialopez@gmail.com', '1254478544', 1),
(36885484, 'ANALIA', 'CASALTA', 'F', 1, '2013/02/24', 'RIVERENOS 744', 'CABA', 1,'analiacasalta@gmail.com', '1154485566', 1),
(36485485, 'JOSEFINA', 'PEREZ', 'F', 3, '1997/03/04', 'MAIPÚ 1234', 'MARTÍNEZ', 2,'josefinaperez@gmail.com', '1159854415', 1),
(36885486, 'DIANA', 'TÍVOLI', 'F', 2, '1983/05/14', 'FLORIDA 368', 'SAN ISIDRO', 2,'dianativoli@gmail.com', '1169857855', 1),
(36885487, 'JORGE', 'MACRI', 'M', 1, '1957/05/19', 'FLORIDA 845', 'VICENTE LOPEZ', 2,'jorgemacri@gmail.com', '1163258845', 1),
(46885488, 'NAZARENA', 'VÉLEZ', 'F', 2, '1975/03/28', 'THAMES 845', 'CABA', 1,'nazarenavelez@gmail.com', '1135848855', 1),
(35885488, 'BABY', 'ETCHECOPAR', 'M', 2, '1967/11/04', 'MELO 5699', 'SAN MARTÍN', 2,'babyetchecopar@gmail.com', '1138574485', 1),
(49652485, 'VERÓNICA', 'CARBONARI', 'F', 1, '1982/01/13', 'CARAPA 1234', 'CARAPACHAY', 2,'veronicacarbonari@gmail.com', '1135478558', 1),
(29557485, 'SANDRA', 'LEIVA', 'F', 1, '1987/05/27', 'SAN FERNANDO 554', 'SAN FERNANDO', 2,'sandraleiva@gmail.com', '1148753255', 1),
(43552485, 'CRISTIAN', 'MACHADO', 'M', 1, '1997/05/10', 'SAN MARTÍN 654', 'TIGRE', 2,'cristianmachado@gmail.com', '1154856655', 1),
(49552685, 'SEBASTIÁN', 'GINES', 'M', 1, '1997/05/26', 'AV. CORRIENTES 554', 'CABA', 1,'sebastiangines@gmail.com', '1164758899', 1),
(49582485, 'GASTÓN', 'ARGAÑARAZ', 'M', 1, '1995/09/22', 'BENAVIDEZ 554', 'BENAVÍDEZ', 2,'gastonargañaraz@gmail.com', '1125584855', 1),
(16885748, 'ANTONIO', 'LAJE', 'M', 1, '1957/04/23', 'FLORIDA 365', 'VICENTE LOPEZ', 2,'antoniolaje@gmail.com', '1154258844', 1),
(16865748, 'ANTONIO', 'GASALLA', 'M', 3, '1945/09/21', 'MONTEVIDEO 5499', 'PILAR', 2,'antoniogasalla@gmail.com', '1148536654', 1),
(11885788, 'PABLO', 'GRANADOS', 'M', 2, '1980/07/27', 'TELEFE 123', 'MARTÍNEZ', 2,'pablogranados@gmail.com', '1147853365', 1),
(16485748, 'ORIANA', 'SABATINI', 'F', 1, '1997/01/11', 'LA SABA 554', 'CABA', 1,'orianasabatini@gmail.com', '1148526654', 1),
(26885748, 'GUIDO', 'KACZKA', 'M', 1, '1977/10/12', 'ARTEAR 5543', 'VILLA BALLESTER', 2,'guidokaczka@gmail.com', '1254478544', 1);

-- TABLA USUARIOS
INSERT INTO USUARIOS (DNI, CONTRASENIA,COD_TIPOSUSUARIO, ESTADO) 
VALUES 
(11111111,'1111',2,1),
(22222222,'2222',2,1),
(33333333,'3333',2,1),
(44444444,'4444',2,1),
(55555555,'5555',2,1),
(66666666,'6666',2,1),
(77777777,'admin',1,1),
(11578468,'billgates',1,1),
(88888888,'admin2',1,1);

-- TABLA TURNOS
INSERT INTO TURNOS (DNIMEDICO, DIA, HORARIO, COD_ESPECIALIDAD, COD_ESTADO_TURNO, ESTADO)
VALUES 
(11111111,'2023-06-29','16:00:00',1,1,1),
(11111111,'2023-06-29','17:00:00',1,1,1),
(11111111,'2023-06-29','18:00:00',1,1,1),
(11111111,'2023-06-29','19:00:00',1,1,1),
(11111111,'2023-07-06','14:00:00',1,1,1),
(11111111,'2023-07-06','15:00:00',1,1,1),
(11111111,'2023-07-06','16:00:00',1,1,1),
(11111111,'2023-07-06','17:00:00',1,1,1),
(11111111,'2023-07-06','18:00:00',1,1,1),
(11111111,'2023-07-06','19:00:00',1,1,1),
(11111111,'2023-07-13','14:00:00',1,1,1),
(11111111,'2023-07-13','15:00:00',1,1,1),
(11111111,'2023-07-13','16:00:00',1,1,1),
(11111111,'2023-07-13','17:00:00',1,1,1),
(11111111,'2023-07-13','18:00:00',1,1,1),
(11111111,'2023-07-13','19:00:00',1,1,1),
(11111111,'2023-07-20','14:00:00',1,1,1),
(11111111,'2023-07-20','15:00:00',1,1,1),
(11111111,'2023-07-20','16:00:00',1,1,1),
(11111111,'2023-07-20','17:00:00',1,1,1),
(11111111,'2023-07-20','18:00:00',1,1,1),
(11111111,'2023-07-20','19:00:00',1,1,1),
(11111111,'2023-07-27','14:00:00',1,1,1),
(11111111,'2023-07-27','15:00:00',1,1,1),
(11111111,'2023-07-27','16:00:00',1,1,1),
(11111111,'2023-07-27','18:00:00',1,1,1),
(12555458,'2023-07-05','10:00:00',4,1,1),
(12555458,'2023-07-05','11:00:00',4,1,1),
(12555458,'2023-07-05','12:00:00',4,1,1),
(12555458,'2023-07-05','13:00:00',4,1,1),
(12555458,'2023-07-12','09:00:00',4,1,1),
(12555458,'2023-07-12','12:00:00',4,1,1),
(12555458,'2023-07-12','13:00:00',4,1,1),
(12555458,'2023-07-19','09:00:00',4,1,1),
(12555458,'2023-07-19','11:00:00',4,1,1),
(12555458,'2023-07-19','12:00:00',4,1,1),
(12555458,'2023-07-19','13:00:00',4,1,1),
(12555458,'2023-07-26','09:00:00',4,1,1),
(12555458,'2023-07-26','10:00:00',4,1,1),
(12555458,'2023-07-26','11:00:00',4,1,1),
(12555458,'2023-07-26','12:00:00',4,1,1),
(12555458,'2023-07-26','13:00:00',4,1,1),
(12885745,'2023-07-01','15:00:00',6,1,1),
(12885745,'2023-07-01','16:00:00',6,1,1),
(12885745,'2023-07-01','17:00:00',6,1,1),
(12885745,'2023-07-01','18:00:00',6,1,1),
(12885745,'2023-07-01','19:00:00',6,1,1),
(12885745,'2023-07-08','13:00:00',6,1,1),
(12885745,'2023-07-08','14:00:00',6,1,1),
(12885745,'2023-07-08','15:00:00',6,1,1),
(12885745,'2023-07-08','16:00:00',6,1,1),
(12885745,'2023-07-08','17:00:00',6,1,1),
(12885745,'2023-07-08','18:00:00',6,1,1),
(12885745,'2023-07-08','19:00:00',6,1,1),
(12885745,'2023-07-15','13:00:00',6,1,1),
(12885745,'2023-07-15','14:00:00',6,1,1),
(12885745,'2023-07-15','15:00:00',6,1,1),
(12885745,'2023-07-15','16:00:00',6,1,1),
(12885745,'2023-07-15','17:00:00',6,1,1),
(12885745,'2023-07-15','18:00:00',6,1,1),
(12885745,'2023-07-15','19:00:00',6,1,1),
(12885745,'2023-07-22','13:00:00',6,1,1),
(12885745,'2023-07-22','14:00:00',6,1,1),
(12885745,'2023-07-22','16:00:00',6,1,1),
(12885745,'2023-07-22','18:00:00',6,1,1),
(13558468,'2023-06-30','14:00:00',2,1,1),
(13558468,'2023-06-30','15:00:00',2,1,1),
(13558468,'2023-06-30','16:00:00',2,1,1),
(13558468,'2023-06-30','17:00:00',2,1,1),
(13558468,'2023-06-30','18:00:00',2,1,1),
(13558468,'2023-06-30','19:00:00',2,1,1),
(13558468,'2023-07-07','13:00:00',2,1,1),
(13558468,'2023-07-07','14:00:00',2,1,1),
(13558468,'2023-07-07','15:00:00',2,1,1),
(13558468,'2023-07-07','16:00:00',2,1,1),
(13558468,'2023-07-07','17:00:00',2,1,1),
(13558468,'2023-07-07','18:00:00',2,1,1),
(13558468,'2023-07-07','19:00:00',2,1,1),
(13558468,'2023-07-14','13:00:00',2,1,1),
(13558468,'2023-07-14','14:00:00',2,1,1),
(13558468,'2023-07-14','15:00:00',2,1,1),
(13558468,'2023-07-14','16:00:00',2,1,1),
(13558468,'2023-07-14','17:00:00',2,1,1),
(13558468,'2023-07-14','18:00:00',2,1,1),
(13558468,'2023-07-14','19:00:00',2,1,1),
(13558468,'2023-07-21','13:00:00',2,1,1),
(13558468,'2023-07-21','14:00:00',2,1,1),
(13558468,'2023-07-21','15:00:00',2,1,1),
(13558468,'2023-07-21','16:00:00',2,1,1),
(13558468,'2023-07-21','17:00:00',2,1,1),
(13558468,'2023-07-21','18:00:00',2,1,1),
(13558468,'2023-07-21','19:00:00',2,1,1),
(13558468,'2023-07-28','13:00:00',2,1,1),
(13558468,'2023-07-28','14:00:00',2,1,1),
(13558468,'2023-07-28','16:00:00',2,1,1),
(13558468,'2023-07-28','18:00:00',2,1,1),
(16887365,'2023-07-04','11:00:00',9,1,1),
(16887365,'2023-07-04','12:00:00',9,1,1),
(16887365,'2023-07-04','13:00:00',9,1,1),
(16887365,'2023-07-04','14:00:00',9,1,1),
(16887365,'2023-07-04','15:00:00',9,1,1),
(16887365,'2023-07-11','10:00:00',9,1,1),
(16887365,'2023-07-11','11:00:00',9,1,1),
(16887365,'2023-07-11','12:00:00',9,1,1),
(16887365,'2023-07-11','13:00:00',9,1,1),
(16887365,'2023-07-11','14:00:00',9,1,1),
(16887365,'2023-07-11','15:00:00',9,1,1),
(16887365,'2023-07-18','10:00:00',9,1,1),
(16887365,'2023-07-18','11:00:00',9,1,1),
(16887365,'2023-07-18','12:00:00',9,1,1),
(16887365,'2023-07-18','13:00:00',9,1,1),
(16887365,'2023-07-18','14:00:00',9,1,1),
(16887365,'2023-07-18','15:00:00',9,1,1),
(16887365,'2023-07-25','11:00:00',9,1,1),
(16887365,'2023-07-25','13:00:00',9,1,1),
(16887365,'2023-07-25','14:00:00',9,1,1),
(20485444,'2023-07-04','12:00:00',5,1,1),
(20485444,'2023-07-04','13:00:00',5,1,1),
(20485444,'2023-07-04','14:00:00',5,1,1),
(20485444,'2023-07-04','15:00:00',5,1,1),
(20485444,'2023-07-11','10:00:00',5,1,1),
(20485444,'2023-07-11','11:00:00',5,1,1),
(20485444,'2023-07-11','12:00:00',5,1,1),
(20485444,'2023-07-11','13:00:00',5,1,1),
(20485444,'2023-07-11','14:00:00',5,1,1),
(20485444,'2023-07-18','10:00:00',5,1,1),
(20485444,'2023-07-18','11:00:00',5,1,1),
(20485444,'2023-07-18','12:00:00',5,1,1),
(20485444,'2023-07-18','13:00:00',5,1,1),
(20485444,'2023-07-18','14:00:00',5,1,1),
(20485444,'2023-07-18','15:00:00',5,1,1),
(20485444,'2023-07-25','10:00:00',5,1,1),
(20485444,'2023-07-25','11:00:00',5,1,1),
(20485444,'2023-07-25','12:00:00',5,1,1),
(20485444,'2023-07-25','13:00:00',5,1,1),
(20485444,'2023-07-25','14:00:00',5,1,1),
(22222222,'2023-06-29','15:00:00',2,1,1),
(22222222,'2023-06-29','16:00:00',2,1,1),
(22222222,'2023-06-29','17:00:00',2,1,1),
(22222222,'2023-06-29','18:00:00',2,1,1),
(22222222,'2023-06-29','19:00:00',2,1,1),
(22222222,'2023-07-06','14:00:00',2,1,1),
(22222222,'2023-07-06','15:00:00',2,1,1),
(22222222,'2023-07-06','16:00:00',2,1,1),
(22222222,'2023-07-06','17:00:00',2,1,1),
(22222222,'2023-07-06','18:00:00',2,1,1),
(22222222,'2023-07-06','19:00:00',2,1,1),
(22222222,'2023-07-13','14:00:00',2,1,1),
(22222222,'2023-07-13','15:00:00',2,1,1),
(22222222,'2023-07-13','16:00:00',2,1,1),
(22222222,'2023-07-13','17:00:00',2,1,1),
(22222222,'2023-07-13','18:00:00',2,1,1),
(22222222,'2023-07-13','19:00:00',2,1,1),
(22222222,'2023-07-20','14:00:00',2,1,1),
(22222222,'2023-07-20','15:00:00',2,1,1),
(22222222,'2023-07-20','18:00:00',2,1,1),
(22222222,'2023-07-20','19:00:00',2,1,1),
(22222222,'2023-07-27','14:00:00',2,1,1),
(22222222,'2023-07-27','15:00:00',2,1,1),
(22222222,'2023-07-27','16:00:00',2,1,1),
(22222222,'2023-07-27','17:00:00',2,1,1),
(22222222,'2023-07-27','18:00:00',2,1,1),
(26887596,'2023-06-30','11:00:00',6,1,1),
(26887596,'2023-06-30','12:00:00',6,1,1),
(26887596,'2023-06-30','13:00:00',6,1,1),
(26887596,'2023-06-30','14:00:00',6,1,1),
(26887596,'2023-06-30','15:00:00',6,1,1),
(26887596,'2023-07-07','10:00:00',6,1,1),
(26887596,'2023-07-07','11:00:00',6,1,1),
(26887596,'2023-07-07','12:00:00',6,1,1),
(26887596,'2023-07-07','13:00:00',6,1,1),
(26887596,'2023-07-07','14:00:00',6,1,1),
(26887596,'2023-07-07','15:00:00',6,1,1),
(26887596,'2023-07-14','10:00:00',6,1,1),
(26887596,'2023-07-14','11:00:00',6,1,1),
(26887596,'2023-07-14','12:00:00',6,1,1),
(26887596,'2023-07-14','13:00:00',6,1,1),
(26887596,'2023-07-14','14:00:00',6,1,1),
(26887596,'2023-07-14','15:00:00',6,1,1),
(26887596,'2023-07-21','10:00:00',6,1,1),
(26887596,'2023-07-21','11:00:00',6,1,1),
(26887596,'2023-07-21','13:00:00',6,1,1),
(26887596,'2023-07-21','14:00:00',6,1,1),
(26887596,'2023-07-21','15:00:00',6,1,1),
(26887596,'2023-07-28','10:00:00',6,1,1),
(26887596,'2023-07-28','11:00:00',6,1,1),
(26887596,'2023-07-28','12:00:00',6,1,1),
(26887596,'2023-07-28','13:00:00',6,1,1),
(26887596,'2023-07-28','14:00:00',6,1,1),
(32885741,'2023-06-29','12:00:00',3,1,1),
(32885741,'2023-06-29','13:00:00',3,1,1),
(32885741,'2023-06-29','14:00:00',3,1,1),
(32885741,'2023-06-29','15:00:00',3,1,1),
(32885741,'2023-06-29','16:00:00',3,1,1),
(32885741,'2023-07-06','11:00:00',3,1,1),
(32885741,'2023-07-06','12:00:00',3,1,1),
(32885741,'2023-07-06','13:00:00',3,1,1),
(32885741,'2023-07-06','14:00:00',3,1,1),
(32885741,'2023-07-06','15:00:00',3,1,1),
(32885741,'2023-07-06','16:00:00',3,1,1),
(32885741,'2023-07-13','11:00:00',3,1,1),
(32885741,'2023-07-13','12:00:00',3,1,1),
(32885741,'2023-07-13','13:00:00',3,1,1),
(32885741,'2023-07-13','14:00:00',3,1,1),
(32885741,'2023-07-13','15:00:00',3,1,1),
(32885741,'2023-07-13','16:00:00',3,1,1),
(32885741,'2023-07-20','11:00:00',3,1,1),
(32885741,'2023-07-20','12:00:00',3,1,1),
(32885741,'2023-07-20','13:00:00',3,1,1),
(32885741,'2023-07-20','14:00:00',3,1,1),
(32885741,'2023-07-20','15:00:00',3,1,1),
(32885741,'2023-07-20','16:00:00',3,1,1),
(32885741,'2023-07-27','11:00:00',3,1,1),
(32885741,'2023-07-27','12:00:00',3,1,1),
(32885741,'2023-07-27','13:00:00',3,1,1),
(32885741,'2023-07-27','14:00:00',3,1,1),
(32885741,'2023-07-27','15:00:00',3,1,1),
(33333333,'2023-07-04','09:00:00',3,1,1),
(33333333,'2023-07-04','10:00:00',3,1,1),
(33333333,'2023-07-04','11:00:00',3,1,1),
(33333333,'2023-07-04','12:00:00',3,1,1),
(33333333,'2023-07-04','13:00:00',3,1,1),
(33333333,'2023-07-11','09:00:00',3,1,1),
(33333333,'2023-07-11','10:00:00',3,1,1),
(33333333,'2023-07-11','11:00:00',3,1,1),
(33333333,'2023-07-11','12:00:00',3,1,1),
(33333333,'2023-07-11','13:00:00',3,1,1),
(33333333,'2023-07-18','09:00:00',3,1,1),
(33333333,'2023-07-18','10:00:00',3,1,1),
(33333333,'2023-07-18','11:00:00',3,1,1),
(33333333,'2023-07-18','12:00:00',3,1,1),
(33333333,'2023-07-18','13:00:00',3,1,1),
(33333333,'2023-07-25','09:00:00',3,1,1),
(33333333,'2023-07-25','10:00:00',3,1,1),
(33333333,'2023-07-25','11:00:00',3,1,1),
(33333333,'2023-07-25','12:00:00',3,1,1),
(33333333,'2023-07-25','13:00:00',3,1,1),
(44444444,'2023-06-29','11:00:00',4,1,1),
(44444444,'2023-06-29','12:00:00',4,1,1),
(44444444,'2023-06-29','13:00:00',4,1,1),
(44444444,'2023-06-29','14:00:00',4,1,1),
(44444444,'2023-06-29','15:00:00',4,1,1),
(44444444,'2023-07-06','10:00:00',4,1,1),
(44444444,'2023-07-06','11:00:00',4,1,1),
(44444444,'2023-07-06','12:00:00',4,1,1),
(44444444,'2023-07-06','13:00:00',4,1,1),
(44444444,'2023-07-06','14:00:00',4,1,1),
(44444444,'2023-07-06','15:00:00',4,1,1),
(44444444,'2023-07-13','10:00:00',4,1,1),
(44444444,'2023-07-13','11:00:00',4,1,1),
(44444444,'2023-07-13','12:00:00',4,1,1),
(44444444,'2023-07-13','13:00:00',4,1,1),
(44444444,'2023-07-13','14:00:00',4,1,1),
(44444444,'2023-07-13','15:00:00',4,1,1),
(44444444,'2023-07-20','10:00:00',4,1,1),
(44444444,'2023-07-20','11:00:00',4,1,1),
(44444444,'2023-07-20','12:00:00',4,1,1),
(44444444,'2023-07-20','13:00:00',4,1,1),
(44444444,'2023-07-20','14:00:00',4,1,1),
(44444444,'2023-07-20','15:00:00',4,1,1),
(44444444,'2023-07-27','10:00:00',4,1,1),
(44444444,'2023-07-27','11:00:00',4,1,1),
(44444444,'2023-07-27','12:00:00',4,1,1),
(44444444,'2023-07-27','13:00:00',4,1,1),
(54545454,'2023-07-04','10:00:00',5,1,1),
(54545454,'2023-07-04','11:00:00',5,1,1),
(54545454,'2023-07-04','12:00:00',5,1,1),
(54545454,'2023-07-04','13:00:00',5,1,1),
(54545454,'2023-07-04','14:00:00',5,1,1),
(54545454,'2023-07-11','09:00:00',5,1,1),
(54545454,'2023-07-11','10:00:00',5,1,1),
(54545454,'2023-07-11','11:00:00',5,1,1),
(54545454,'2023-07-11','12:00:00',5,1,1),
(54545454,'2023-07-11','13:00:00',5,1,1),
(54545454,'2023-07-11','14:00:00',5,1,1),
(54545454,'2023-07-18','09:00:00',5,1,1),
(54545454,'2023-07-18','10:00:00',5,1,1),
(54545454,'2023-07-18','11:00:00',5,1,1),
(54545454,'2023-07-18','12:00:00',5,1,1),
(54545454,'2023-07-18','14:00:00',5,1,1),
(54545454,'2023-07-25','09:00:00',5,1,1),
(54545454,'2023-07-25','10:00:00',5,1,1),
(54545454,'2023-07-25','11:00:00',5,1,1),
(54545454,'2023-07-25','12:00:00',5,1,1),
(55555555,'2023-07-01','14:00:00',9,1,1),
(55555555,'2023-07-01','15:00:00',9,1,1),
(55555555,'2023-07-01','16:00:00',9,1,1),
(55555555,'2023-07-01','17:00:00',9,1,1),
(55555555,'2023-07-01','18:00:00',9,1,1),
(55555555,'2023-07-01','19:00:00',9,1,1),
(55555555,'2023-07-08','14:00:00',9,1,1),
(55555555,'2023-07-08','15:00:00',9,1,1),
(55555555,'2023-07-08','16:00:00',9,1,1),
(55555555,'2023-07-08','17:00:00',9,1,1),
(55555555,'2023-07-08','18:00:00',9,1,1),
(55555555,'2023-07-08','19:00:00',9,1,1),
(55555555,'2023-07-15','15:00:00',9,1,1),
(55555555,'2023-07-15','16:00:00',9,1,1),
(55555555,'2023-07-15','17:00:00',9,1,1),
(55555555,'2023-07-15','18:00:00',9,1,1),
(55555555,'2023-07-15','19:00:00',9,1,1),
(55555555,'2023-07-22','14:00:00',9,1,1),
(55555555,'2023-07-22','15:00:00',9,1,1),
(55555555,'2023-07-22','16:00:00',9,1,1),
(99999999,'2023-07-04','13:00:00',1,1,1),
(99999999,'2023-07-04','14:00:00',1,1,1),
(99999999,'2023-07-04','15:00:00',1,1,1),
(99999999,'2023-07-11','11:00:00',1,1,1),
(99999999,'2023-07-11','12:00:00',1,1,1),
(99999999,'2023-07-11','13:00:00',1,1,1),
(99999999,'2023-07-11','14:00:00',1,1,1),
(99999999,'2023-07-11','15:00:00',1,1,1),
(99999999,'2023-07-18','11:00:00',1,1,1),
(99999999,'2023-07-18','12:00:00',1,1,1),
(99999999,'2023-07-18','13:00:00',1,1,1),
(99999999,'2023-07-18','14:00:00',1,1,1),
(99999999,'2023-07-18','15:00:00',1,1,1),
(99999999,'2023-07-25','11:00:00',1,1,1),
(99999999,'2023-07-25','12:00:00',1,1,1),
(99999999,'2023-07-25','13:00:00',1,1,1);


-- INSERT INTO TURNOS (DNIMEDICO, DIA, HORARIO, COD_PACIENTE, COD_ESPECIALIDAD,  COD_ESTADO_TURNO, ESTADO)
INSERT INTO TURNOS (DNIMEDICO, DIA, HORARIO, COD_ESPECIALIDAD, COD_ESTADO_TURNO, ESTADO, COD_PACIENTE)
VALUES 
(11111111,'2023-06-29','14:00:00',1,2,1,10),
(11111111,'2023-06-29','15:00:00',1,2,1,11),
(11111111,'2023-07-27','17:00:00',1,2,1,8),
(11111111,'2023-07-27','19:00:00',1,2,1,5),
(12555458,'2023-07-05','09:00:00',4,2,1,7),
(12555458,'2023-07-12','10:00:00',4,2,1,2),
(12555458,'2023-07-12','11:00:00',4,2,1,10),
(12555458,'2023-07-19','10:00:00',4,2,1,3),
(12885745,'2023-07-01','13:00:00',6,2,1,2),
(12885745,'2023-07-01','14:00:00',6,2,1,1),
(12885745,'2023-07-22','15:00:00',6,2,1,15),
(12885745,'2023-07-22','19:00:00',6,2,1,16),
(13558468,'2023-06-30','13:00:00',2,2,1,14),
(13558468,'2023-07-28','15:00:00',2,2,1,18),
(13558468,'2023-07-28','17:00:00',2,2,1,17),
(13558468,'2023-07-28','19:00:00',2,2,1,15),
(16887365,'2023-07-04','10:00:00',9,2,1,8),
(16887365,'2023-07-25','10:00:00',9,2,1,9),
(16887365,'2023-07-25','12:00:00',9,2,1,7),
(16887365,'2023-07-25','15:00:00',9,2,1,6),
(20485444,'2023-07-04','10:00:00',5,2,1,5),
(20485444,'2023-07-04','11:00:00',5,2,1,4),
(20485444,'2023-07-11','15:00:00',5,2,1,3),
(20485444,'2023-07-25','15:00:00',5,2,1,2),
(22222222,'2023-06-29','14:00:00',2,2,1,1),
(22222222,'2023-07-20','16:00:00',2,2,1,5),
(22222222,'2023-07-20','17:00:00',2,2,1,9),
(22222222,'2023-07-27','19:00:00',2,2,1,14),
(26887596,'2023-06-30','10:00:00',6,2,1,13),
(26887596,'2023-07-21','12:00:00',6,2,1,11),
(26887596,'2023-07-28','15:00:00',6,2,1,6),
(32885741,'2023-06-29','11:00:00',3,2,1,8),
(32885741,'2023-07-27','16:00:00',3,2,1,9),
(44444444,'2023-06-29','10:00:00',4,2,1,3),
(44444444,'2023-07-27','14:00:00',4,2,1,2),
(44444444,'2023-07-27','15:00:00',4,2,1,6),
(54545454,'2023-07-04','09:00:00',5,2,1,5),
(54545454,'2023-07-18','13:00:00',5,2,1,8),
(54545454,'2023-07-25','13:00:00',5,2,1,9),
(54545454,'2023-07-25','14:00:00',5,2,1,2),
(55555555,'2023-07-15','14:00:00',9,2,1,4),
(55555555,'2023-07-22','17:00:00',9,2,1,3),
(55555555,'2023-07-22','18:00:00',9,2,1,2),
(55555555,'2023-07-22','19:00:00',9,2,1,7),
(99999999,'2023-07-04','11:00:00',1,2,1,10),
(99999999,'2023-07-04','12:00:00',1,2,1,11),
(99999999,'2023-07-25','14:00:00',1,2,1,12),
(99999999,'2023-07-25','15:00:00',1,2,1,13);


-- PROCEDIMIENTOS DE ALMACENADO

-- SP PARA LISTAR MEDICOS
CREATE PROCEDURE SP_LISTARMEDICOS()
	SELECT EMPLEADOS.DNI, EMPLEADOS.NOMBRE, EMPLEADOS.APELLIDO, EMPLEADOS.SEXO, EMPLEADOS.COD_NACIONALIDAD AS COD_NACIONALIDAD, EMPLEADOS.DESCRIPCION AS NACIONALIDAD, EMPLEADOS.FECHA_NAC, EMPLEADOS.DIRECCION, EMPLEADOS.LOCALIDAD, EMPLEADOS.PROVINCIA AS COD_PROV, EMPLEADOS.DESCRIPCION, EMPLEADOS.EMAIL, EMPLEADOS.TELEFONO, EMPLEADOS.ESTADO, ESPECIALIDAD.CODIGO, ESPECIALIDAD.DESCRIPCION, DIASEMANA.DESCRIPCION, MEDICO_POR_ESPECIALIDAD.HORAINICIO, MEDICO_POR_ESPECIALIDAD.HORAFIN 
	FROM EMPLEADOS AS E
	INNER JOIN NACIONALIDADES AS N ON N.CODIGO=E.COD_NACIONALIDAD
	INNER JOIN PROVINCIAS AS P ON P.CODIGO=E.PROVINCIA
	INNER JOIN MEDICO_POR_ESPECIALIDAD AS ME ON ME.DNIMEDICO = E.DNI
	INNER JOIN ESPECIALIDADES AS ESP ON ESP.CODIGO=ME.COD_ESPECIALIDAD
	INNER JOIN DIASEMANA AS DS ON DS.CODIGO=ME.DIASEMANA;

-- SP PARA LISTAR ADMINISTRADORES
CREATE PROCEDURE SP_LISTARADMINISTRADORES()
	SELECT E.DNI, E.NOMBRE, E.APELLIDO, E.SEXO, E.COD_NACIONALIDAD AS COD_NACIONALIDAD, N.DESCRIPCION AS NACIONALIDAD, E.FECHA_NAC, E.DIRECCION, E.LOCALIDAD, E.PROVINCIA AS COD_PROV, P.DESCRIPCION, E.EMAIL, E.TELEFONO, E.ESTADO, E.COD_TIPOSUSUARIO
	FROM EMPLEADOS AS E
	INNER JOIN NACIONALIDADES AS N ON N.CODIGO=E.COD_NACIONALIDAD
	INNER JOIN PROVINCIAS AS P ON P.CODIGO=E.PROVINCIA
	WHERE E.COD_TIPOSUSUARIO=1;

-- SP PARA LISTAR PACIENTES
CREATE PROCEDURE SP_LISTARPACIENTES()
	SELECT P.CODIGO, P.DNI, P.NOMBRE, P.APELLIDO, P.SEXO, P.COD_NACIONALIDAD AS COD_NACIONALIDAD, N.DESCRIPCION AS NACIONALIDAD, P.FECHA_NAC, P.DIRECCION, P.LOCALIDAD, P.PROVINCIA AS COD_PROV, PROV.DESCRIPCION, P.EMAIL, P.TELEFONO, P.ESTADO
	FROM PACIENTES AS P
	INNER JOIN NACIONALIDADES AS N ON N.CODIGO=P.COD_NACIONALIDAD
	INNER JOIN PROVINCIAS AS PROV ON PROV.CODIGO=P.PROVINCIA;

-- SP PARA OBTENER TURNOS POR MEDICO
CREATE PROCEDURE SP_LISTAR_TURNOS_POR_DNIMEDICO(IN DNIMEDICOPAR INT)
	SELECT T.DNIMEDICO, T.DIA, T.HORARIO, T.COD_PACIENTE, T.COD_ESPECIALIDAD, ESP.DESCRIPCION, T.COD_ESTADO_TURNO, ET.DESCRIPCION, T.ESTADO
	FROM TURNOS AS T
	INNER JOIN EMPLEADOS AS E ON E.DNI=T.DNIMEDICO
	INNER JOIN MEDICO_POR_ESPECIALIDAD AS ME ON ME.DNIMEDICO = E.DNI
	INNER JOIN ESPECIALIDADES AS ESP ON ESP.CODIGO=ME.COD_ESPECIALIDAD
	INNER JOIN ESTADOS_TURNOS AS ET ON ET.CODIGO=T.COD_ESTADO_TURNO
	WHERE T.DNIMEDICO=DNIMEDICOPAR;

-- CALL SP_LISTAR_TURNOS_POR_DNIMEDICO (11111111);


-- SP PARA OBTENER TURNOS SEGÚN DNI PACIENTE
CREATE PROCEDURE SP_LISTAR_TURNOS_DNIPACIENTE(IN DNIPACIENTEPAR INT)
	SELECT T.DNIMEDICO, T.DIA, T.HORARIO, T.COD_PACIENTE, T.COD_ESPECIALIDAD, ESP.DESCRIPCION, T.COD_ESTADO_TURNO, ET.DESCRIPCION, T.ESTADO
	FROM TURNOS AS T
	INNER JOIN PACIENTES AS P ON P.CODIGO=T.COD_PACIENTE
	INNER JOIN EMPLEADOS AS E ON E.DNI=T.DNIMEDICO
	INNER JOIN MEDICO_POR_ESPECIALIDAD AS ME ON ME.DNIMEDICO = E.DNI
	INNER JOIN ESPECIALIDADES AS ESP ON ESP.CODIGO=ME.COD_ESPECIALIDAD
	INNER JOIN ESTADOS_TURNOS AS ET ON ET.CODIGO=T.COD_ESTADO_TURNO
	WHERE P.DNI=DNIPACIENTEPAR;

-- CALL SP_LISTAR_TURNOS_DNIPACIENTE 25668455

delimiter //
CREATE PROCEDURE INSERTMEDICO(IN DNI INT, IN NOMBRE VARCHAR(20), IN APELLIDO VARCHAR(30), IN SEXO VARCHAR(1), 
IN COD_NACIONALIDAD INT, IN FECHA_NAC DATE, IN DIRECCION VARCHAR(40), 
IN LOCALIDAD VARCHAR(20), IN PROVINCIA INT, IN EMAIL VARCHAR(40), IN TELEFONO VARCHAR(15) , IN ESTADO BIT, IN COD_ESPECIALIDAD INT, 
IN DIASEMANA INT, IN HORAINICIO TIME, IN HORAFIN TIME)
BEGIN
   INSERT INTO empleados VALUES(DNI, NOMBRE, APELLIDO, SEXO, COD_NACIONALIDAD, FECHA_NAC, DIRECCION, LOCALIDAD, PROVINCIA, EMAIL, TELEFONO, ESTADO);
   INSERT INTO medico_por_especialidad  VALUES(DNI, COD_ESPECIALIDAD, DIASEMANA, HORAINICIO, HORAFIN, ESTADO);

END //
delimiter ;



delimiter //
CREATE PROCEDURE EDITMEDICO(IN DNI INT, IN NOMBRE VARCHAR(20), IN APELLIDO VARCHAR(30), IN SEXO VARCHAR(1), 
IN COD_NACIONALIDAD INT, IN FECHA_NAC DATE, IN DIRECCION VARCHAR(40), 
IN LOCALIDAD VARCHAR(20), IN PROVINCIA INT, IN EMAIL VARCHAR(40), IN TELEFONO VARCHAR(15) , IN ESTADO BIT, IN COD_ESPECIALIDAD INT, 
IN DIASEMANA INT, IN HORAINICIO TIME, IN HORAFIN TIME)
BEGIN
   UPDATE  empleados SET NOMBRE=@NOMBRE , APELLIDO=@APELLIDO, SEXO=@SEXO, COD_NACIONALIDAD=@COD_NACIONALIDAD, FECHA_NAC=@FECHA_NAC, DIRECCION=@DIRECCION, LOCALIDAD=@LOCALIDAD, PROVINCIA=@PROVINCIA, EMAIL=@EMAIL, TELEFONO=@TELEFONO, ESTADO=@ESTADO WHERE empleados.DNI=@DNI;
   UPDATE  medico_por_especialidad SET COD_ESPECIALIDAD=@COD_ESPECIALIDAD, DIASEMANA=@DIASEMANA, HORAINICIO=@HORAINICIO, HORAFIN=@HORAFIN, ESTADO=@ESTADO WHERE medico_por_especialidad.DNIMEDICO=@DNI;
   

END //
delimiter ;


DELIMITER //

CREATE PROCEDURE INSERTTURNOS(
  IN p_dni INT,
  IN p_dia_atencion INT,
  IN p_hora_inicio VARCHAR(25),
  IN p_hora_fin VARCHAR(25),
  IN p_especialidad INT
)
BEGIN
  DECLARE dia VARCHAR(50);
  DECLARE horario TIME;
  DECLARE fecha_actual DATETIME;
  DECLARE contador INT DEFAULT 0;
  
  -- Obtiene la fecha actual
  SET fecha_actual = NOW();

  -- Define el día como "hoy"
  SET dia = DATE_FORMAT(fecha_actual, '%Y-%m-%d');

  -- Genera los turnos para los próximos 30 días
  WHILE contador < 30 DO
    -- Verifica si el día actual coincide con el día de atención
    IF WEEKDAY(dia) = p_dia_atencion THEN
      -- Define el horario de inicio como la hora proporcionada
      SET horario = STR_TO_DATE(p_hora_inicio, '%H:%i:%s');

      WHILE horario <= STR_TO_DATE(p_hora_fin, '%H:%i:%s') DO
      INSERT INTO turnos (DNIMEDICO, dia, horario, Cod_paciente, cod_especialidad, cod_estado_turno, estado)
        VALUES (p_dni, dia, horario, NULL, p_especialidad, 1, 1);

        -- Agrega una hora al horario
        SET horario = ADDTIME(horario, '01:00:00');
      END WHILE;
    END IF;

    -- Agrega un día al día actual
    SET dia = DATE_ADD(dia, INTERVAL 1 DAY);
    SET contador = contador + 1;
  END WHILE;

END //

DELIMITER ;